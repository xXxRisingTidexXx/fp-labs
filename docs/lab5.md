---
title: Лабораторна робота №5
description: Обробка раціональних та комплексних чисел мовами функціонального програмування
---
## Зміст

* TOC
{:toc}

## Мета

Опанувати технологію абстракції даних в мовах функціонального програмування. Реалізувати програму обробки раціональних
та комплексних чисел мовами функціонального програмування, представивши ці числа конструкціями типу «пара».

## Завдання

1. Розв’язати дробово-раціональне рівняння, виконавши операції приведення дробів до спільного знаменника, прирівнювання
    чисельника до нуля і пошук його коренів, прирівнювання знаменника до нуля і пошук його коренів, порівняння коренів
    чисельника і знаменника, вилучення тих, що співпадають.

    ![formula](https://quicklatex.com/cache3/05/ql_077aa4e7d28b673f10a4a7168ff91d05_l3.png)

2. Створити список комплексних чисел довжиною `n` в тригонометричній формі. Перше комплексне число в списку задається
    через `r` та `φ`. Кожне i-те комплексне число в списку обчислюється, як i-та степінь першого числа. Для зведення
    комплексного числа в степінь використовувати формулу Муавра.

    ![formula](https://quicklatex.com/cache3/cb/ql_bcf93c5e3e65548e63df9eb37198b8cb_l3.png)

## Мова та IDE

В якості мови програмування була обрана [racket](https://racket-lang.org/), оскільки вона є строго функціональною. В
якості середовища розробки було обрано супутній редактор DrRacket.

## Реалізація

### Задача 1

В даній задаче запропоноване мною рішення дає раду рівнянню в загальному вигляді, після чого під час виконання
підставляються конкретні значення. Для цього я будую із вхідної тотожності матрицю коефіцієнтів 4 x 2:

![formula](https://quicklatex.com/cache3/50/ql_0bc575e0757be44b4dd59f08c1bed950_l3.png)

Із наведеного вище виразу ми отримуємо узагальнений список пар:

```racket
> (list (cons a11 b11) (cons a12 b12) (cons a21 b21) (cons a22 b22))
```

Тепер необхідно порахувати ОДЗ. До неї увійдуть числа, отримані з виразів у знаменниках:

![formula](https://quicklatex.com/cache3/f1/ql_ae18ffd59a52fcbdc847f8039382d4f1_l3.png)

Після знесення дробів у один бік і зведення до спільного знаменника маємо отримати квадратичне рівння:

![formula](https://quicklatex.com/cache3/13/ql_b85345d213923dd1da1205d1e9f1c313_l3.png)

Коренями якого будуть значення:

![formula](https://quicklatex.com/cache3/94/ql_5777c4f1c731e340f04986be090bb094_l3.png)

Опісля обрахунків єдина дія, що лишилася - перевірка на ОДЗ. Наприкінці маємо програму:

```racket
(define (solve-equation)
  ; В даній задачі я через загальне рішення знаходжу корені конкретного рівняння.
  (define (solve pairs)
    ; Дана процедура вирішує дробово-раціональне рівняння, задане матрицею коефіцієнтів.
    (let
        ; Обрахунок області визначення.
        ((restriction
          ; Знаходимо значення, при яких знаменники перетворюються в 0.
          (map
           (lambda (p) (/ (first p) (second p)))
           ; Залишаємо тільки ті вирази, що місять змінну.
           (filter
            (lambda (p) (not (= 0 (second p))))
            ; Беремо лише знаменники дробів.
            (map
             (lambda (i) (list-ref pairs i))
             '(1 3)))))
         ; Коефіцієнт перед х^2 після зведення дробів до спільного знаменника.
         (m
          (-
           (* (first (first pairs)) (first (fourth pairs)))
           (* (first (second pairs)) (first (third pairs)))))
         ; Коефіцієнт перед х після зведення дробів до спільного знаменника.
         (n
          (-
           (-
            (+
             (* (first (fourth pairs)) (second (first pairs)))
             (* (first (first pairs)) (second (fourth pairs))))
            (* (first (second pairs)) (second (third pairs))))
           (* (first (third pairs)) (second (second pairs)))))
         ; Вільний коефіцієнт після зведення дробів до спільного знаменника.
         (k
          (-
           (* (second (first pairs)) (second (fourth pairs)))
           (* (second (second pairs)) (second (third pairs))))))
      (let
          ; Дискримінант квадратичного рівняння.
          ((d (sqrt (- (* n n) (* 4 m k)))))
        ; Виведення ОДЗ.
        (display "ОДЗ, x != ")
        (display restriction)
        (newline)
        ; Виведення розв'язку.
        (display "Корені, х = ")
        (display
         ; Видалення з відповіді коренів, що не належать до ОДЗ.
         (filter
          (lambda (x) (not (member x restriction)))
          (list (/ (- (- n) d) (* 2 m)) (/ (+ (- n) d) (* 2 m))))))))
  ; Коефіцієнти лінійних виразів в обох частинах дробів обох сторінь рівняння.
  (solve '((3 -5) (0 -2) (0 1) (1 0))))
```

Дивимося результати роботи:

```racket
> (solve-equation)
ОДЗ, x != (0)
Корені, х = (2/3 1)
```

### Задача 2

Дане завдання є простим обрахунком членів послідовності, де кожен елемент залежить лише від степеня, до якого
підноситься початкове значення. Запишемо комплексне число в тигонометричному вигляді:

![formula](https://quicklatex.com/cache3/7b/ql_946ca541f96c78816481ae149900177b_l3.png)

Пам'ятаючи наведену вище формулу Муавра, зробимо наступні дії:

1. Згенеруємо цілі числа в діапазоні від 1 до `n`.
2. Застосуємо до i-го члена функцію `map`, щоб піднести до і-го степеня.

```racket
(define (complex-series r phi n)
  ; Дана процедура приймає на вхід модуль та кут комплексного числа й генерує n наступників.
  (define (evaluate i)
    (let
        ; Кут комплексного числа в i-му степені.
        ((tau (* i phi)))
      ; Виведення модуля комплексного числа.
      (display (~r (expt r i) #:precision '(= 6) #:min-width 9))
      (display " * (sin(")
      ; Виведення дійсної складової комплексного числа.
      (display (~r tau #:precision '(= 3) #:min-width 6))
      (display ") + i * cos(")
      ; Виведення уявної складової комплексного числа.
      (display (~r tau #:precision '(= 3) #:min-width 6))
      (display "))")
      (newline)))
  ; Генерація послідовності степенів та виведення відповідних комплексних чисел.
  (map evaluate (range 1 (+ n 1)))
  (void))
```

В результаті обчислень маємо отримати такі результати:

```racket
> (complex-series 1.1 3.14 10)
 1.100000 * (sin( 3.140) + i * cos( 3.140))
 1.210000 * (sin( 6.280) + i * cos( 6.280))
 1.331000 * (sin( 9.420) + i * cos( 9.420))
 1.464100 * (sin(12.560) + i * cos(12.560))
 1.610510 * (sin(15.700) + i * cos(15.700))
 1.771561 * (sin(18.840) + i * cos(18.840))
 1.948717 * (sin(21.980) + i * cos(21.980))
 2.143589 * (sin(25.120) + i * cos(25.120))
 2.357948 * (sin(28.260) + i * cos(28.260))
 2.593742 * (sin(31.400) + i * cos(31.400))
```

## Оцінка достовірності

Оскільки в першій задачі результат збігається з контрольною відповіддю, перейдемо до перевірки другого завдання.
Для цього я скористався [онлайн-калькулятором](https://www.hackmath.net/en/calculator/complex-number), в якому
обрахував 2, 5 та 8 степені початкового числа. У racket кути вказані в радіанах, на сайті - в градусах. Як бачимо,
обчислення ідентичні.

![z2](images/z2.png)

![z5](images/z5.png)

![z8](images/z8.png)

## Висновки

Комплексні та дійсні числа - невід'ємна складова солідних математичних обчислень. Математична бібліотека стандартного
пакету кожної мови програмування включає в себе операції над раціональними числами та їхнім розширенням. Попри те, що
racket не є винятком, корисною була практика самостійної реалізації функціоналу для операцій над дійсними числами й
дробами. Основні будівельні блоки, які були при цьому використані - списки й пари.
